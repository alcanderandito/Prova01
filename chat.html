<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Chat ‚Ä¢ Don¬†Alfred</title>
<style>
/* RESET ------------------------------------------------------------- */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif}

/* SAFE‚ÄëAREA --------------------------------------------------------- */
:root{
  --safeT:env(safe-area-inset-top);
  --safeB:env(safe-area-inset-bottom);
  --safeL:env(safe-area-inset-left);
  --safeR:env(safe-area-inset-right);
  --dynB:var(--safeB);            /* sar√† sovrascritta via JS */
}

/* HEADER fisso ------------------------------------------------------ */
header{
  position:fixed;top:var(--safeT);left:var(--safeL);right:var(--safeR);
  height:48px;line-height:48px;background:#075e54;color:#fff;
  display:flex;align-items:center;gap:12px;padding:0 16px;font-weight:500;z-index:2}
header a{font-size:28px;text-decoration:none;color:inherit}
header span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* INPUTBAR fisso ---------------------------------------------------- */
#bar{
  position:fixed;left:var(--safeL);right:var(--safeR);
  bottom:calc(var(--dynB));       /* solo uno: tastiera O home‚Äëbar */
  height:56px;background:#f0f0f0;display:flex;align-items:center;gap:8px;padding:0 8px;z-index:2}
#bar input{flex:1;border:none;border-radius:20px;padding:10px 14px;font-size:15px;background:#fff}
#bar button{border:none;width:46px;height:46px;border-radius:50%;background:#25d366;display:flex;align-items:center;justify-content:center}

/* LISTA messaggi ---------------------------------------------------- */
#log{
  position:fixed;
  top:calc(var(--safeT) + 48px);
  left:var(--safeL);right:var(--safeR);
  bottom:calc(var(--dynB) + 56px);
  overflow-y:auto;padding:12px;background:#ece5dd;
  display:flex;flex-direction:column;gap:6px;
}

/* BOLLE ------------------------------------------------------------- */
.bubble{max-width:75%;padding:8px 10px;font-size:14px;line-height:1.35;border-radius:8px}
.me{align-self:flex-end;background:#d1f8c6;border-radius:8px 0 8px 8px}
.you{align-self:flex-start;background:#fff;border-radius:0 8px 8px 8px}

/* SOLO smartphone --------------------------------------------------- */
@media(min-width:601px){
 body::before{content:'üõë¬†Solo smartphone';display:flex;align-items:center;justify-content:center;height:100vh;width:100%;font-size:2.5rem;background:#000;color:#fff;text-align:center}
 header,#log,#bar{display:none}
}
</style>
</head>
<body>

<header><a href="#">‚Äπ</a><span>Don¬†Alfred ü§µüèª‚Äç‚ôÇÔ∏è</span></header>
<div id="log" role="log" aria-live="polite"></div>

<form id="bar" autocomplete="off">
  <input id="txt" placeholder="Messaggio" enterkeyhint="send">
  <button type="submit">‚ñ∂</button>
</form>

<script>
/* ---------- adatta var(--dynB) ---------- */
const vv = window.visualViewport;
function upB(){
  /* altezza UI sovrapposta (keyboard o URL‚Äëbar) */
  const over = vv ? innerHeight - vv.height - vv.offsetTop : 0;
  const val = over > 0 ? over + 'px' : 'env(safe-area-inset-bottom)';
  document.documentElement.style.setProperty('--dynB', val);
}
upB();
if(vv){
  vv.addEventListener('resize', upB);
  vv.addEventListener('scroll', upB);
}
window.addEventListener('orientationchange', upB);

/* ---------- demo messaggi --------- */
const log = document.getElementById('log');
document.getElementById('bar').addEventListener('submit',e=>{
  e.preventDefault();
  const inp=document.getElementById('txt');
  const t=inp.value.trim(); if(!t)return;
  log.insertAdjacentHTML('beforeend',`<div class="bubble me">${t}</div>`);
  inp.value=''; log.scrollTop=log.scrollHeight;
});
</script>
</body>
</html>
