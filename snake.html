        /* ... (CSS per body, game-container, h1, info-panel rimane simile) ... */

        .canvas-position-anchor {
            position: relative; /* Fondamentale per il posizionamento assoluto dei controlli */
            /* La larghezza sarà determinata dal canvas al suo interno */
            /* Aggiungeremo padding-bottom per fare spazio ai controlli posizionati assolutamente */
            /* La sua larghezza sarà quella del canvas.
               Viene centrato da align-items:center del game-container. */
            flex-shrink: 0;
        }

        #gameCanvas {
            /* ... (stili esistenti per bordo, ombra, sfondo) ... */
            display: block; /* Per evitare spazio extra sotto se fosse inline */
            /* Non servono margini auto se il genitore .canvas-position-anchor è centrato
               e il canvas ne occupa la larghezza (o il wrapper si adatta al canvas) */
        }

        .controls {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            /* Posizionamento verticale sotto il canvas: */
            top: 100%; /* Inizia subito dopo la fine del .canvas-position-anchor (cioè il canvas) */
            margin-top: 15px; /* Spazio desiderato tra canvas e controlli */

            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 8px;
            width: 166px;  /* Larghezza che non dovrebbe tagliare il pulsante destro */
            height: 166px; /* Mantenuto proporzionale */
            box-sizing: border-box;
            /* Non più margin-left/right: auto qui perché il posizionamento assoluto gestisce la centratura */
        }

        /* Nelle Media Query, dobbiamo gestire il padding-bottom del .canvas-position-anchor */
        @media (max-width: 768px) {
            /* ... (stili per body, game-container, h1, info-panel) ... */
            /* justify-content: space-around su .game-container per distribuire:
               h1, info-panel, canvas-position-anchor, home-btn */

            .canvas-position-anchor {
                /* Calcola padding-bottom = altezza controlli + margine sopra controlli + un po' di respiro extra */
                /* Altezza controlli (166px) + margin-top controlli (15px) = 181px.  Aggiungiamo un po' per sicurezza. */
                padding-bottom: 190px; /* SPAZIO PER I CONTROLLI ASSOLUTI SOTTO */
                margin-top: 0; /* space-around gestisce lo spazio sopra l'ancora */
                margin-bottom: 0; /* space-around gestisce lo spazio sotto l'ancora (prima del home-btn) */
            }

            .controls {
                width: 166px; height: 166px; gap: 8px;
                margin-top: 15px; /* Spazio sotto il canvas */
                /* position, left, transform ereditati */
            }
            .control-btn { font-size: 2.5em; border-radius: 12px; }

            .home-btn {
                /* ... (stili esistenti per home-btn) ... */
                /* margin-top sarà gestito da space-around rispetto al .canvas-position-anchor */
            }
        }

        @media (max-height: 680px) and (max-width: 768px) { /* Breakpoint altezza modificato per più granularità */
            /* Su schermi molto bassi, il posizionamento assoluto potrebbe diventare problematico se non c'è abbastanza spazio.
               Potremmo dover tornare a un flusso normale o ridurre drasticamente.
               Per ora, tentiamo di mantenere la logica, ma con dimensioni ridotte. */
            .game-container{
                justify-content: center; /* Per evitare che space-around faccia casini */
                 min-height: auto; /* Lascia che il contenuto definisca l'altezza */
            }
             h1 { font-size: 1.6em; margin-bottom: 10px; }
            .info-panel { font-size: 0.9em; margin-bottom: 10px; }

            .canvas-position-anchor {
                /* Altezza controlli (146px) + margin-top (10px) = 156px.  */
                padding-bottom: 165px; /* Spazio per controlli più piccoli */
                margin-top: 10px; /* Spazio sopra l'ancora */
                margin-bottom: 10px; /* Spazio sotto l'ancora */

            }
            .controls {
                width: 146px; height: 146px; gap: 6px;
                margin-top: 10px; /* Spazio sotto il canvas */
            }
            .control-btn { font-size: 2.0em; border-radius: 10px; }
            .home-btn { margin-top: 15px; /* Spazio sopra il pulsante home */ }
        }
