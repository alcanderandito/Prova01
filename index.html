<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Team Due Mori</title>

  <!--‚Ää‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî  STILI ESISTENTI  ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-->
  <style>
    /* RESET & BASE */
    *{margin:0;padding:0;box-sizing:border-box;}
    html,body{width:100%;height:100%;overflow-y:scroll;font-family:Arial,Helvetica,sans-serif;}

    /* BACKGROUND ZOOM AL PRIMO SCROLL */
    .bg{
      position:fixed;top:50%;left:50%;
      width:120%;height:120%;
      object-fit:cover;
      transform:translate(-50%,-50%) scale(1);
      transform-origin:center center;
      z-index:-2;
    }
    .overlay{
      position:fixed;inset:0;
      background:rgba(0,0,0,.5);
      z-index:-1;pointer-events:none;
    }

    /* HEADER pieno schermo */
    header{
      height:100vh;display:flex;flex-direction:column;
      align-items:center;justify-content:center;text-align:center;
      color:#fff;padding:0 20px;
    }
    h1{
      font-size:2.5rem;font-weight:700;letter-spacing:.05em;
      text-shadow:0 1px 4px rgba(0,0,0,.7);margin-bottom:.3em;
    }
    .subtitle{font-size:1rem;text-shadow:0 1px 3px rgba(0,0,0,.7);margin-bottom:1em;}

    /* freccia */
    #scrollIndicator{font-size:2rem;color:#fff;cursor:pointer;animation:pulse 1.5s ease-in-out infinite;}
    @keyframes pulse{0%,100%{transform:scale(1);}50%{transform:scale(1.3);}}

    /* MAIN scroll */
    main{position:relative;z-index:1;min-height:200vh;padding:40px 20px 80px;}

    /* NAV GRID */
    .nav{display:grid;gap:20px;justify-items:center;grid-template-columns:repeat(2,1fr);margin:0 auto;max-width:800px;}
    @media(min-width:600px){.nav{grid-template-columns:repeat(5,1fr);}}

    /* MONETE */
    .nav a{
      width:100px;height:100px;border-radius:50%;
      display:flex;align-items:center;justify-content:center;
      font-size:.9rem;font-weight:600;color:#fff;text-decoration:none;
      background:rgba(255,255,255,.5);backdrop-filter:blur(4px);
      border:1px solid rgba(255,255,255,.3);box-shadow:0 4px 12px rgba(0,0,0,.2);
      opacity:0;transform:scale(0);
      animation:popIn .5s ease forwards,breath 3s ease-in-out infinite .6s;
    }
    /* ritardi animazione */
    .nav a:nth-child(1){animation-delay:.2s}.nav a:nth-child(2){animation-delay:.35s}
    .nav a:nth-child(3){animation-delay:.5s}.nav a:nth-child(4){animation-delay:.65s}
    .nav a:nth-child(5){animation-delay:.8s}.nav a:nth-child(6){animation-delay:.95s}
    .nav a:nth-child(7){animation-delay:1.1s}.nav a:nth-child(8){animation-delay:1.25s}
    .nav a:nth-child(9){animation-delay:1.4s}.nav a:nth-child(10){animation-delay:1.55s}

    @keyframes popIn{0%{opacity:0;transform:scale(0);}60%{opacity:1;transform:scale(1.2);}100%{opacity:1;transform:scale(1);}}
    @keyframes breath{0%,100%{transform:scale(1);}50%{transform:scale(1.05);}}
    .nav a:hover{box-shadow:0 0 8px rgba(255,255,255,.8),0 0 16px rgba(255,255,255,.6);transform:translateY(-4px) scale(1.05);}
    .nav a:active{transform:translateY(0) scale(1.02);box-shadow:inset 0 2px 6px rgba(0,0,0,.3);}

    /*‚Ää‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî  NUOVI STILI CHAT  ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî*/
    #chatToggle{
      position:fixed;top:1rem;right:1rem;
      width:60px;height:60px;border:none;border-radius:50%;
      background:#0094ff url("https://img.icons8.com/ios-filled/50/ffffff/chat--v1.png") center/55% no-repeat;
      cursor:pointer;z-index:1000;box-shadow:0 4px 12px rgba(0,0,0,.25);
      transition:transform .15s;
    }
    #chatToggle:hover{transform:scale(1.08);}
    #chatContainer{
      position:fixed;bottom:1.5rem;right:1.5rem;
      width:320px;max-width:90vw;height:420px;
      display:none;z-index:1100;
    }
    /* finestra chat (identica a prima) */
    .chatBox{width:100%;height:100%;display:flex;flex-direction:column;border:2px solid #00345f;border-radius:6px;box-shadow:0 4px 12px rgba(0,0,0,.25);background:#fff;font-size:14px;}
    .chatBar{background:#00345f;color:#fff;padding:8px 12px;font-weight:700;display:flex;justify-content:space-between;align-items:center;}
    .chatBody{flex:1;overflow-y:auto;padding:6px 10px;}
    .chatBody .msg{margin:4px 0;display:flex;}
    .chatBody .bot  .bubble{background:#f1f1f1;color:#000;align-self:flex-start}
    .chatBody .user .bubble{background:#0094ff;color:#fff;align-self:flex-end}
    .bubble{padding:6px 10px;border-radius:12px;max-width:75%;word-wrap:break-word;}
    .chatInput{display:flex;border-top:1px solid #ccc;}
    .chatInput input{flex:1;padding:10px;border:none;font-size:14px;}
    .chatInput button{width:52px;border:none;background:#0094ff;color:#fff;font-size:18px;cursor:pointer;}
  </style>
</head>
<body>

  <!-- immagine e overlay esistenti -->
  <img src="home.PNG" class="bg" id="bg" alt="">
  <div class="overlay"></div>

  <!--‚Ää‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî  BOTTONE & CONTENITORE CHAT  ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-->
  <button id="chatToggle" aria-label="Apri chat"></button>
  <div id="chatContainer">
    <div class="chatBox" id="chatBox">
      <div class="chatBar">Don Alfred ü§µüèª‚Äç‚ôÇÔ∏è <span id="chatClose" style="cursor:pointer;font-weight:400;">‚úï</span></div>
      <div class="chatBody" id="chatBody"></div>
      <form class="chatInput" id="chatForm" autocomplete="off">
        <input id="chatInput" placeholder="Scrivi qui‚Ä¶"/>
        <button type="submit">‚û§</button>
      </form>
    </div>
  </div>

  <!--‚Ää‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî  CONTENUTO ORIGINALE  ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-->
  <header>
    <h1>Team Due Mori</h1>
    <div class="subtitle">Sfoglia le schede del Dream-Team.</div>
    <div id="scrollIndicator">&#8595;</div>
  </header>

  <main id="main">
    <nav class="nav" id="teamNav">
      <a href="fabio.html">Don&nbsp;Fabio</a>
      <a href="lucia.html">Lucia</a>
      <a href="martina.html">Martina</a>
      <a href="marzio.html">Marzio</a>
      <a href="roberta.html">Roberta</a>
      <a href="max.html">Max</a>
      <a href="claudia.html">Claudia</a>
      <a href="reby.html">Reby</a>
      <a href="gioele.html">Gioele</a>
      <a href="hamza.html">Hamza</a>
    </nav>
  </main>

  <!--‚Ää‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî  SCRIPTS  ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-->
  <script>
    /* zoom bg sullo scroll */
    window.addEventListener('scroll',()=>{
      const factor=Math.min(window.scrollY/200,1);
      const scale=1+factor*0.5;
      document.getElementById('bg').style.transform=`translate(-50%,-50%) scale(${scale})`;
    });
    document.getElementById('scrollIndicator').addEventListener('click',()=>{
      document.getElementById('teamNav').scrollIntoView({behavior:'smooth'});
    });

    /* CHAT UI */
    const chatToggle   = document.getElementById('chatToggle');
    const chatBox      = document.getElementById('chatContainer');
    const chatClose    = document.getElementById('chatClose');
    const chatBody     = document.getElementById('chatBody');
    const chatForm     = document.getElementById('chatForm');
    const chatInput    = document.getElementById('chatInput');
    chatToggle.onclick = ()=> chatBox.style.display = 'block';
    chatClose .onclick = ()=> chatBox.style.display = 'none';

    const appendMsg=(text,who)=>{
      const row=document.createElement('div');row.className='msg '+who;
      row.innerHTML=`<div class="bubble">${text}</div>`;
      chatBody.appendChild(row);
      chatBody.scrollTop=chatBody.scrollHeight;
    };

    chatForm.addEventListener('submit',async e=>{
      e.preventDefault();
      const text=chatInput.value.trim(); if(!text) return;
      appendMsg(text,'user'); chatInput.value=''; chatInput.focus();

      try{
        const r=await fetch('/api/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:text})});
        const {reply}=await r.json();
        appendMsg(reply,'bot');
      }catch{appendMsg('Errore di connessione üò¢','bot');}
    });
  </script>

</body>
</html>
