<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Home • Team Due Mori</title>

  <!-- Importazione Font da Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">

  <style>
    /* mini‑reset */
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{
      font-family: 'Roboto', -apple-system, Segoe UI, Arial, sans-serif;
      height: 100%;
    }

    /* === NAVBAR FISSA === */
    .navbar {
      background-color: #333;
      padding: 10px 20px;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 500;
      display: flex;
      align-items: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .dropdown {
      position: relative;
      display: inline-block;
    }
    .dropdown-button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 15px;
      font-size: 16px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      font-family: 'Roboto', sans-serif;
    }
    .dropdown-button:hover, .dropdown-button:focus {
      background-color: #45a049;
    }
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #f9f9f9;
      min-width: 220px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      z-index: 999;
      border-radius: 5px;
      margin-top: 5px;
    }
    .dropdown-content ul { list-style-type: none; }
    .dropdown-content ul li a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
      font-family: 'Roboto', sans-serif;
    }
    .dropdown-content ul li a:hover { background-color: #f1f1f1; }
    .show { display: block; }
    .dropdown-content ul li.submenu-item { position: relative; }
    .dropdown-content ul li.submenu-item .submenu { display: none; padding-left: 20px; background-color: #e9e9e9; }
    .dropdown-content ul li.submenu-item .submenu ul li a { padding: 10px 15px; font-size: 0.9em; }
    .dropdown-content ul li.submenu-item .submenu ul li a:hover { background-color: #ddd; }
    .dropdown-content ul li.submenu-item .submenu.open { display: block; }
    .submenu-trigger .arrow { display: inline-block; margin-left: 5px; transition: transform 0.3s ease; font-size: 0.8em; }
    .submenu-trigger.open .arrow { transform: rotate(180deg); }

    /* === PLAYER SPOTIFY === */
    #spotify-player-container {
      position: fixed;
      bottom: 5px;
      left: 10px;
      width: 300px; /* MODIFICATO: Ridotta la larghezza per renderlo più compatto */
      height: 80px; /* Altezza minima per l'embed compatto di Spotify */
      z-index: 950;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      border-radius: 12px;
    }
    #spotify-player-container iframe {
      border-radius: 12px;
      border: none;
    }

    /* === BOTTONE CHAT === */
    #goChatContainer { position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
    #goChat{ width:70px;height:70px;border:none;border-radius:50%; background:#25d366 url("https://img.icons8.com/ios-filled/50/ffffff/chat--v1.png") center/60% no-repeat; box-shadow:0 4px 14px rgba(0,0,0,.25);cursor:pointer; }
    #goChat:active{transform:scale(.9)}

    /* === SFONDO DINAMICO === */
    #dynamic-background-container { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: -1; overflow: hidden; }
    .background-slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center center; opacity: 0; transition: opacity 1.8s cubic-bezier(0.4, 0, 0.2, 1); transform: scale(1.03); }
    .background-slide.active { opacity: 1; animation: kenburns 25s infinite alternate ease-in-out; }
    @keyframes kenburns { 0% { transform: scale(1.03) translate(0%, 0%); } 100% { transform: scale(1.12) translate(-1.5%, 1.5%); } }
    .background-slide.active.even-slide-kenburns { animation-name: kenburns-alt; }
    @keyframes kenburns-alt { 0% { transform: scale(1.03) translate(0%, 0%); } 100% { transform: scale(1.12) translate(1.5%, -1.5%); } }

    /* === TITOLO EROE === */
    #hero-title-container { position: fixed; top: 48%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #ffffff; z-index: 5; padding: 20px; width: 90%; max-width: 850px; text-shadow: 0px 2px 8px rgba(0, 0, 0, 0.75); }
    #hero-title-container h1 { font-family: 'Oswald', sans-serif; font-size: 3.5rem; font-weight: 700; margin-bottom: 0.4em; line-height: 1.15; letter-spacing: 1.5px; text-transform: uppercase; }
    #hero-title-container p { font-family: 'Roboto', sans-serif; font-size: 1.3rem; font-weight: 300; line-height: 1.6; opacity: 0.9; }
    @media (max-width: 992px) { #hero-title-container h1 { font-size: 3rem; } #hero-title-container p { font-size: 1.15rem; } }
    @media (max-width: 768px) { #hero-title-container { top: 45%; } #hero-title-container h1 { font-size: 2.5rem; } #hero-title-container p { font-size: 1rem; } }
    @media (max-width: 480px) { #hero-title-container h1 { font-size: 2rem; letter-spacing: 1px; } #hero-title-container p { font-size: 0.9rem; } }

    /* === CONTENUTO PRINCIPALE === */
    .main-content { position: relative; z-index: 2; padding-top: 70px; padding-left: 20px; padding-right: 20px; padding-bottom: 20px; }
  </style>
</head>
<body>

  <div class="navbar">
    <div class="dropdown">
      <button onclick="toggleMenu()" class="dropdown-button">Menu</button>
      <div id="menuContent" class="dropdown-content">
        <!-- Il contenuto di menu.html verrà caricato qui -->
        <p style="padding: 10px; color: #555;">Caricamento menu...</p>
      </div>
    </div>
  </div>

  <div id="dynamic-background-container"></div>
  <div id="hero-title-container"><h1>Team Due Mori</h1><p>Il Dream Team (almeno la mattina, dopo il caffè).</p></div>
  
  <div id="spotify-player-container">
    <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/2hrUnZb0uCNpF7MSWwWFow?utm_source=generator&theme=0&autoplay=1" width="100%" height="100%" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
  </div>

  <div class="main-content"> <!-- IL TUO CONTENUTO VA QUI! --> </div>
  <div id="goChatContainer"><a href="chat.html" aria-label="Apri chat"><button id="goChat"></button></a></div>

  <script>
    // --- SCRIPT PER IL MENU A TENDINA (CON LOGICA FETCH RIPRISTINATA DAL TUO ORIGINALE) ---
    function toggleMenu() {
      const menuContent = document.getElementById("menuContent");
      const isCurrentlyShown = menuContent.classList.contains("show");

      // CONDIZIONE PER IL FETCH ESATTAMENTE COME NEL TUO CODICE ORIGINALE FUNZIONANTE:
      if (!isCurrentlyShown && (menuContent.querySelector('p') || menuContent.innerHTML.trim() === '')) {
        fetch('menu.html') // Assicurati che menu.html sia nella stessa cartella
          .then(response => {
            if (!response.ok) {
              // Se c'è un errore (es. 404 Not Found), lancia un errore per il .catch()
              throw new Error('Errore nel caricamento di menu.html: ' + response.status + ' ' + response.statusText);
            }
            return response.text(); // Ottieni il contenuto HTML come testo
          })
          .then(data => {
            if (data.trim() === '') {
                // Se menu.html è vuoto
                menuContent.innerHTML = '<p style="padding: 10px; color: #888;">Menu vuoto.</p>';
            } else {
                menuContent.innerHTML = data; // Inserisci l'HTML caricato nel div
            }
          })
          .catch(error => {
            // In caso di errore di fetch o altro, mostra un messaggio di errore nel menu
            menuContent.innerHTML = '<p style="padding: 10px; color: red;">Errore caricamento menu.</p>';
            console.error('Dettagli errore fetch menu.html:', error); // Logga l'errore dettagliato in console
          });
      }

      menuContent.classList.toggle("show"); // Mostra o nascondi il menu

      // Chiudi sottomenu aperti se il menu principale si chiude
      if (!menuContent.classList.contains("show")) {
        const openSubmenus = menuContent.querySelectorAll('.submenu.open');
        openSubmenus.forEach(submenu => {
          submenu.classList.remove('open');
          const trigger = submenu.previousElementSibling;
          if (trigger && trigger.classList.contains('submenu-trigger')) {
              trigger.classList.remove('open');
          }
        });
      }
    }

    // Funzione per mostrare/nascondere i sottomenu
    // Questa funzione verrà chiamata da onclick="" presente nell'HTML caricato da menu.html
    function toggleSubmenu(event, triggerElement) {
      event.preventDefault();
      event.stopPropagation();
      const submenu = triggerElement.nextElementSibling;
      if (submenu && submenu.classList.contains('submenu')) {
        submenu.classList.toggle('open');
        triggerElement.classList.toggle('open');
      }
    }

    // Chiudi il menu principale (e i sottomenu) se l'utente clicca fuori da esso
    window.onclick = function(event) {
      const menuContent = document.getElementById("menuContent");
      const dropdownButton = document.querySelector('.dropdown-button');
      if (menuContent && dropdownButton && !dropdownButton.contains(event.target) && !menuContent.contains(event.target)) { // Aggiunto controllo per menuContent
        if (menuContent.classList.contains("show")) {
          menuContent.classList.remove('show');
          const openSubmenus = menuContent.querySelectorAll('.submenu.open');
          openSubmenus.forEach(submenu => {
            submenu.classList.remove('open');
            const trigger = submenu.previousElementSibling;
            if (trigger && trigger.classList.contains('submenu-trigger')) {
                trigger.classList.remove('open');
            }
          });
        }
      }
    }

    // --- SCRIPT PER SFONDO DINAMICO ---
    document.addEventListener('DOMContentLoaded', () => {
        const backgroundContainer = document.getElementById('dynamic-background-container');
        const images = ['home.PNG', 'home1.PNG', 'home2.PNG', 'home3.PNG', 'home4.PNG', 'home5.PNG', 'home6.PNG', 'home7.PNG'];
        let currentImageIndex = -1;
        const slideDuration = 7500;
        const kenBurnsAnimationDuration = 25;
        images.forEach(src => { const img = new Image(); img.src = src; });
        images.forEach((imageName, index) => {
            const slide = document.createElement('div');
            slide.classList.add('background-slide');
            slide.style.backgroundImage = `url('${imageName}')`;
            if (index % 2 !== 0) { slide.classList.add('even-slide-kenburns'); }
            backgroundContainer.appendChild(slide);
        });
        const slides = backgroundContainer.querySelectorAll('.background-slide');
        function showNextSlide() {
            if (slides.length === 0) return;
            if (currentImageIndex >= 0) {
                slides[currentImageIndex].classList.remove('active');
                slides[currentImageIndex].style.animation = 'none';
                slides[currentImageIndex].offsetHeight;
            }
            currentImageIndex = (currentImageIndex + 1) % slides.length;
            slides[currentImageIndex].classList.add('active');
            if (slides[currentImageIndex].classList.contains('even-slide-kenburns')) {
                slides[currentImageIndex].style.animation = `kenburns-alt ${kenBurnsAnimationDuration}s infinite alternate ease-in-out`;
            } else {
                slides[currentImageIndex].style.animation = `kenburns ${kenBurnsAnimationDuration}s infinite alternate ease-in-out`;
            }
        }
        if (slides.length > 0) { showNextSlide(); }
        setInterval(showNextSlide, slideDuration);
    });
  </script>

</body>
</html>
